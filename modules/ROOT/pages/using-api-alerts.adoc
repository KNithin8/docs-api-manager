= Reviewing Alerts Concepts
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]
:keywords: alerts,api, api alerts

An API alert is an alarm that flags one of the following problems:

* The API request violates a policy.
* Requests received by the API exceed a given number within a period of time.
* The API returns a specified HTTP error code.
* The API response time exceeds a certain amount.

xref:runtime-manager::alerts-on-runtime-manager.adoc[Alerts] in Runtime Manager differ from API alerts. For example, Runtime Manager flags CPU usage, secure data gateway up and down, and deployment success or failure. API alerts relate to an API request or response.

You can add one of the following types of alerts to an API:

* Policy violation
+
An infraction of one or more policies that govern the API occurs.
+
* Request Count
+
Users request access to the API more times than allowed in a specified period of time.
+
* Response Code
+
The API returns one of these HTTP codes upon receiving a request: 400, 401, 403, 404, 408, 500, 502, or 503
+
* Response Time
+
The response time of the API exceeds a specified period.

A request count alert condition is similar to a policy alert that uses the rate limiting policy. Valid entries for the time interval option for a request count are in the range 1 - 999999999. These time intervals specified are implemented as sliding windows, not absolute minute boundaries, to prevent problems caused by data bursts.

You create and configure an API alert by adding alerts to an API instance in API Manager.

== Alert Notification

API Manager fires alerts when condition state changed from good to bad or from bad to good. No new alert fires if the condition remains in the same state. For a newly created alert initial state is undefined, so the very first occurrence of the bad state can be missed.

When the alert fires, API Manager sends email notifications to you, and to others if configured.

When you set an alert, you select users in your Business Group who can receive email notifications about the alert. The notification includes information about events that trigger the alert as specified by the level of severity. Users receive two emails:

* One email describes the alert. For example:
+
`Your API, CesarDemoAPI - Basic:151 (Environment: "NewOne"), has received greater than 2 requests within 1 consecutive periods of 1 minutes.`
+
* Another email notifies you when the alert is resolved.
+
`Your API Version, jsonplaceholderapi - 1.0.development, is no longer in an alert state. The number of policy violations was not greater than 1 in the last 1 consecutive periods of 1 minutes.`

After an alert fires, and API Manager sends the first set of two notification emails, and stops listening for alerts until the next alert period begins. This technique prevents repetitive notification emails.

== Alert Notification Categories

.Contracts
[%header]
|===
| Action | Recipient | Description
| Contract approved
| Client application owners
| User will be notified that request access was approved.

| Contract auto-approved
| Organization administrators, environment administrators, contracts managers
| User will be notified that request access was approved.

| Contract pending
| Organization administrators, environment administrators, contracts managers
| User will be notified that request access is pending.

| Pending contract rejected
| Client application owners
| User will be notified that request access was rejected.

| Revoked contract restored
| Client application owners
| User will be notified that request access was restored.

| Approved contract revoked
| Client application owners
| User will be notified that request access was revoked.

| Contract tier changed
| Client application owners
| User will be notified that the contract tier was changed.

| Requested contract tier change approved
| Client application owners
| User will be notified that a requested tier change was approved.

| Requested contract tier change rejected
| Client application owners
| User will be notified that a requested tier change was rejected.

| Contract tier change requested
| Organization administrators, environment administrators, contracts managers
| User will be notified that a contract tier change is pending review.
|===

.Group Contracts
[%header]
|===
| Action | Recipient | Description
| Contract approved
| Client application owners
| User will be notified that request access was approved.

| Contract auto-approved
| Group administrators
| User will be notified that a request access was auto-approved.

| Approved contract revoked
| Client application owners
| User will be notified that request access was revoked.

| Revoked contract restored
| Client application owners
| User will be notified that request access was restored.

| Pending contract rejected
| Client application owners
| User will be notified that request access was rejected.

| Contract pending
| Group administrators
| User will be notified that request access is pending.

| Contract tier changed
| Client application owners
| User will be notified that a contract tier change is pending review.

| Requested contract tier change approved
| Client application owners
| User will be notified that a requested tier change was approved.

| Requested contract tier change rejected
| Client application owners
| User will be notified that a requested tier change was rejected.

| Contract tier change requested
| Group administrators
| User will be notified that a contract tier change is pending review.
|===

.Policies
[%header]
|===
| Action | Recipient | Description
| Deployment of an API that is not covered by automated policies
| Organization administrators, environment administrators
| User will be notified if the API is not Mule 4 or above.
|===

== See Also

* xref:runtime-manager::alerts-on-runtime-manager.adoc[Runtime Manager alerts]
* https://www.techopedia.com/definition/869/sliding-window[Sliding windows]
