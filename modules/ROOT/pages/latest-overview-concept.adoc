= Reviewing API Manager Concepts
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]
:keywords: api, manager, raml
:page-aliases: general:getting-started:api-lifecycle-overview.adoc

API Manager is a component of Anypoint Platform for managing, governing, and securing APIs. The component leverages the runtime capabilities of API Gateway, which enforces policies, collects and tracks analytics data, manages proxies, provides industry standard encryption and authentications, and manages applications.

API Manager is tightly integrated with the following tools:

* Design Center for specifying the structure of the API
* Exchange for storing and publishing API assets
* Studio for implementing the API
+
Using Autodiscovery, API changes made in Studio are synchronized with the API registered in other tools, such as Design Center and API Manager.

The following flow diagram describes one possible relationship between the tools:

image::hello-world-flow-diagram.png[60%,60%]

. Build an API specification in Design Center.
. Publish the API specification from Design Center to Exchange.
. In Exchange, test the API against Mocking Service.
. In API Manager, via *Manage API*, import the API that was published to Exchange.
. In API Manager, apply a rate-limiting policy to the newly imported API. 
. In Studio, create a Mule application and download the API specification from Exchange.
. In Studio, implement and deploy the API.
. Test the API using a tool such as `cURL`. 

== Basic Concepts
=== Policies
Policies enable you to enforce regulations to help manage security, control traffic, and improve adaptability of your APIs. For example, a policy can control authentication, access, allotted consumption, and service level access (SLA).

API Manager supports the following types of policies:

* Default Policies
* Automated Policies
* Custom Policies

=== SLA Tiers
Service Level Access (SLA) tiers are categories of user access that you define for an API. The tier definition combined with an SLA-based policy determines whether access to the API at a certain level requires your approval. The tier definition also can limit the number of requests an application can make to the API. To enforce SLA tiers, you need to apply a rate-limiting or throttling policy that is SLA-based.

=== Client Providers (Identity Providers)
Client providers authorize client applications.

=== Contracts
As the Organization Administrator, after you grant access to applications in Exchange, a contract is automatically created between the API instance and the application. The contract gives access to the application based on SLA tiers that you might specify. Only one contract can exist per API instance and application at any time.

=== API Alerts
An API alert (different from a Runtime Manager alert) is an alarm that flags one of the following:

* The API request violates a policy
* Requests received by the API exceed a given number within a period of time
* The API returns a specified HTTP error code
* The API response time exceeds a certain amount

API Manager triggers alerts when states change from desirable to undesirable or vice versa. When an alert triggers, API Manager sends email notifications to you and to others, if configured.

=== Applications
Applications are packages that integrate connectors, modules, and components. An application's main purpose is to read, write, and process data. Typically, applications read data from internal and external sources, process and transform data to the required formats or structures, and write output to the systems and servers where you store or use the transformed data. You build applications with Anypoint Studio.

Applications are also referred to as:

* Mule Applications
* Mule Runtime Engine Applications
* Client Applications
* Developer Client Applications
* Integration Applications

=== API Analytics
API Analytics can provide insight into how your APIs are being used and how they are performing. From API Manager, you can access the Analytics dashboard, create a custom dashboard, create and manage charts, and create reports.

image::analytics-request.png[]

=== API Assets
API assets, published by Exchange, are the components that comprise applications. Components include any of the following:

* APIs (OAS, RAML, RAML fragments, HTTP, WSDL, and Custom)
* API Groups
* Policies
* Examples
* Templates
* Modules
* Connectors owned by MuleSoft or your organization

=== API Groups
An API Group is an API asset that enables organizations to publish a group of API instances as a single unit, so that applications can access the APIs as a group using one client ID and, optionally, client secret. API Groups are created in Anypoint API Manager and published to Exchange.

=== API Instances
Instances of an API can exist in multiple environments. Additionally, you can create multiple instances of an API in the same environment.

You can create one instance of an API that serves as a proxy, with applied caching policies. You can create another to manage directly as a basic endpoint, with applied throttling policies and security policies.

The API Manager dashboard shows key information about a deployed API instance:

image::dashboard-legend.png[]

=== Autodiscovery Schemes
Through the Autodiscovery scheme, API Manager can track the API throughout the life cycle as you modify, version, deploy, govern, and publish it.

=== Business Groups
A system administrator groups individuals within an organization into business groups. Each group has its own Exchange API assets, and its own environments.

=== Environments
Anypoint Platform enables you to create and manage separate deployment environments for APIs and applications. These environments are independent from each other and enable you to test your applications under the same conditions as your production environment.

The support for environments in strategic components of Anypoint Platform eliminates the need to construct version names to reflect an environment. Restricting access to and managing environments is also simplified. Permissions to access APIs are environment-based.

== Hello World
The following procedure describes how to:

* Create a RAML API specification in Design Center
* Publish the API specification to Exchange
* Use Studio to create a Mule application and download the API specification from Exchange
* Use API Manager to apply a rate-limiting policy to the API
* Deploy the API to a local Mule runtime
* Test the API against the local Mule runtime

=== Before You Begin
Within Anypoint Platform, your user ID must be assigned the _Design Center Developer_ permission. Additionally, Studio must be installed.

=== Design Center
The first step in creating our Hello World deployment is to create the API specification in Design Center.

. Click Design Center after signing into Anypoint Platform. The Projects list appears.
. On the Projects page, click *Create new*.
. Select *New API Spec*.
. In the *New API Spec* dialog, name your project. 
. Select the *Iâ€™m comfortable designing it on my own* option.
. Under *Specification Language*, choose *RAML 1.0*.
+ 
API Designer creates the stubs of your API specification using the specification type and version you choose.
. Replace the contents of the text editor with the following specification:
+
----
#%RAML 1.0
version: v1
title: Hello World # required title

/hello-world: # optional resource
  get: # HTTP method declaration
    responses: # declare a response
      200: # HTTP status code
        body: # declare content of response
          application/json: # media type
            # structural definition of a response (schema or type)
            type: object
            properties:
              message: string
            example: # example how a response looks like
              message: "Hello world!"
----

. In the top-right corner of API Designer, click *Publish* and then click *Publish to Exchange*.
. In the subsequent dialog, complete the required fields with the given suggestions and click *Publish to Exchange*.
+
For additional information about publishing to Exchange, refer to xref:design-center::design-publish.adoc[Publish an API Specification].

=== API Manager
. Log in to API Manager.
. Click the environment control and switch to an environment that includes your API.
. Click *Manage API*.
. API Manager manages APIs from Exchange, or you can import APIs in a ZIP file from the file system. For this procedure, select *Manage API from Exchange*.
. In the *Manage API from Exchange* view, type the name of your API next to the *API Name* label and select the API from the dropdown list. The remaining text fields should auto-populate with your API configuration details.
+
Placeholder for screenshot
. Next to *Managing type* select *Basic Endpoint*.
+
Placeholder text to explain the difference between Basic Endpoints and Endpoints with Proxy.
. Click *Save* to finish configuring the API. 
+
Since the API is unprotected, you can now perform management tasks like applying policies, setting up SLA tiers, assigning permissions to the API environment, versioning, viewing API analytics, and more. 
+
As an example, you'll apply the *Simple security manager* proxy. 
. Click *API Management* from the left-hand menu to return to the API dashboard.
. Expand the imported API and click its version.
+
Placeholder for screenshot
. Click *Policies* from the left-hand menu.
. Click *Apply New Policy*.
. Scroll down to and select *Simple security manager*.
+
The *Simple security manager* is a "fake" security manager than can only authenticate a single user. Real-world deployments would make use of more robust security policies, such as *OAuth 2.0 provider*.
. Click *Configure Policy*.
. Accept the default *Username* and *Password* and click *Apply*.

=== Studio
Once the API specification has been published to Exchange, it is now possible to implement the API and deploy the API locally - via Studio. 

== FAQ
=== Are policies enforced when testing against Mocking Service?
Policies are only enforced after deploying the API to a Mule runtime. 

=== What does an API Status of "Unregistered" mean in the API dashboard?
A status of "Unregistered" means that Anypoint Platform has never tracked the endpoint for this API version. Either you have entered a URL for an API or proxy that is not yet deployed, or you have declared an endpoint that is hosted somewhere other than an API Gateway and need to proxy that endpoint so that the platform can track it.

The endpoint must be tracked "Active" by Anypoint Platform in order for governance policies and SLA tiers to function.


== See Also

* https://www.mulesoft.com/resources/api/secure-api-gateway[API Gateway: Why you need flexible deployment]
* xref:api-auto-discovery-new-concept.adoc[Reviewing API Gateway API Autodiscovery concepts]
* xref:design-center::design-create-publish-api-specs.adoc[Create and Publish an API Specification or API Fragment]
* xref:exchange::to-create-an-asset.adoc[Anypoint Exchange]
